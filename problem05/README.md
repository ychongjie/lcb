请改进系统设计，允许⽤户更换⼿机时保留账号。

## 更换绑定的手机

UserCenter 中增加更换绑定手机的接口, redis 中数据模型不变, 处理逻辑如下:

1. 判断 token 是否正确, 用户是否已登录
2. 在 phones 这个 Hash 中增加 新手机-用户id 的键值对
3. 修改该用户的用户信息对象 Hash 中的 phone 字段
4. 在 phones 这个 Hash 中删除 旧手机-用户id 的键值对

## 异常流程处理和数据一致性保证:

* 如果在第三步失败, 则更换绑定手机失败, phones 中多了一个新手机号的脏数据, 会影响该手机号的注册, 可以在注册方法内处理. 出现概率很低也可以人工处理.

* 如果在第四步失败, 则更换绑定手机成功, phones 中多了一个旧手机号的脏数据, 处理方式同上.

如果该游戏可以多设备登录, 则需要考虑并发修改的冲突问题, 有两种方案:

方案一:
   * 通过一致性哈希让同用户的多设备都访问同一个 UserCenter
   * 使用 pipeline 执行 redis 操作, 程序内部对用户数据的修改操作用 mutex 加锁
    
方案二:
   * 使用 multi 确保操作的原子性
    
    
方案一的可扩展性和性能优化空间更大, 方案二实现更简单.